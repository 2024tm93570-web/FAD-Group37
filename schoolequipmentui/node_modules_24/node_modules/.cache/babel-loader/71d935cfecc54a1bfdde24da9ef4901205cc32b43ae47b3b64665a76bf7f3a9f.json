{"ast":null,"code":"// src/api/mockApi.js\nlet items = [{\n  id: 1,\n  name: \"Microscope\",\n  category: \"Lab\",\n  condition: \"Good\",\n  quantity: 5,\n  availability: true\n}, {\n  id: 2,\n  name: \"Football\",\n  category: \"Sports\",\n  condition: \"Fair\",\n  quantity: 10,\n  availability: true\n}];\nlet requests = [];\n// src/api/mockAPI.js\n// existing mock request storage\nlet currentUser = {\n  role: \"Student\",\n  name: \"Student User\"\n}; // for testing\n\nexport function addRequest(equipmentId) {\n  const equipment = equipmentList.find(e => e.equipmentId === equipmentId);\n  if (!equipment || equipment.quantity === 0) {\n    return Promise.reject(\"Equipment not available\");\n  }\n  const newRequest = {\n    id: requests.length + 1,\n    equipmentId: equipment.equipmentId,\n    itemName: equipment.name,\n    requestedBy: currentUser.id,\n    requestedByName: currentUser.name,\n    qty: 1,\n    status: \"Pending\",\n    createdAt: new Date().toISOString()\n  };\n  requests.push(newRequest);\n\n  // Reduce quantity to simulate issued request\n  //   equipment.quantity = Math.max(0, equipment.quantity - 1);\n\n  return Promise.resolve(\"Request submitted\");\n}\n\n// Optional: get requests for student dashboard\nexport function getRequests() {\n  return Promise.resolve(requests);\n}\n\n// src/api/mockAPI.js\n\n// Mock data\nconst equipmentList = [{\n  equipmentId: 1,\n  name: \"Microscope\",\n  category: \"Lab\",\n  condition: \"Good\",\n  quantity: 5,\n  availability: true\n}, {\n  equipmentId: 2,\n  name: \"Football\",\n  category: \"Sports\",\n  condition: \"Fair\",\n  quantity: 10,\n  availability: true\n}];\n\n// Simulate GET /equipment/list\nexport function getEquipmentList() {\n  // Return a promise to mimic async API call\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(equipmentList);\n    }); // simulate network delay\n  });\n}\nexport function approveRequest(requestId) {\n  const req = requests.find(r => r.id === requestId);\n  if (!req) return Promise.reject(\"Request not found\");\n  req.status = \"Approved\";\n\n  // Reduce equipment quantity on approval\n  const equipment = equipmentList.find(e => e.equipmentId === req.equipmentId);\n  if (equipment) {\n    equipment.quantity = Math.max(0, equipment.quantity - req.qty);\n  }\n  return Promise.resolve(\"Request approved\");\n}\n\n// Reject a request\nexport function rejectRequest(requestId) {\n  const req = requests.find(r => r.id === requestId);\n  if (!req) return Promise.reject(\"Request not found\");\n  req.status = \"Rejected\";\n  return Promise.resolve(\"Request rejected\");\n}\n\n// Optional: function to add equipment (for AdminDashboard)\nexport function addItem(newItem) {\n  const id = equipmentList.length + 1;\n  equipmentList.push({\n    equipmentId: id,\n    ...newItem\n  });\n  return Promise.resolve(\"Equipment added\");\n}\nexport function initMockData() {\n  // already initialized above\n}\nexport function loginUser(email, password) {\n  if (email.includes(\"admin\")) return {\n    token: \"mock-admin\",\n    role: \"Admin\",\n    name: \"Admin User\"\n  };\n  if (email.includes(\"lab\")) return {\n    token: \"mock-lab\",\n    role: \"LabAssistant\",\n    name: \"Lab Assistant\"\n  };\n  if (email.includes(\"student\")) return {\n    token: \"mock-student\",\n    role: \"Student\",\n    name: \"Student User\"\n  };\n  return null;\n}\n\n//   export async function getEquipmentList() {\n//     const res = await fetch(`${BASE_URL}/equipment`);\n//     return res.json();\n//   }\n\n// Items\nexport function getItems() {\n  return items;\n}\n\n//   export function addItem(item) {\n//     item.id = items.length + 1;\n//     items.push(item);\n//   }\n\nexport function deleteItem(id) {\n  items = items.filter(it => it.id !== id);\n}\n\n// Requests\n//   export function getRequests() {\n//     return requests;\n//   }\n\n//   export function addRequest(req) {\n//     req.id = requests.length + 1;\n//     requests.push(req);\n//   }\n\nexport function updateRequestStatus(id, status) {\n  requests = requests.map(r => r.id === id ? {\n    ...r,\n    status\n  } : r);\n}\n\n// const BASE_URL = \"https://dummyjson.com/products\"; // update later if hosted\n\n// export async function login(email, password) {\n//   const res = await fetch(`${BASE_URL}/auth/login`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ email, password }),\n//   });\n//   if (!res.ok) throw new Error(\"Login failed\");\n//   return res.json();\n// }\n\n// export async function getEquipmentList() {\n//   const res = await fetch(`${BASE_URL}/equipment`);\n//   return res.json();\n// }\n\n// export async function addEquipment(item) {\n//   const res = await fetch(`${BASE_URL}/equipment`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify(item),\n//   });\n//   return res.json();\n// }\n\n// export async function requestEquipment(id, userId) {\n//   const res = await fetch(`${BASE_URL}/requests`, {\n//     method: \"POST\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ equipmentId: id, userId }),\n//   });\n//   return res.json();\n// }\n\n// export async function updateRequestStatus(id, status) {\n//   const res = await fetch(`${BASE_URL}/requests/${id}`, {\n//     method: \"PUT\",\n//     headers: { \"Content-Type\": \"application/json\" },\n//     body: JSON.stringify({ status }),\n//   });\n//   return res.json();\n// }\n\n// export async function getAllRequests() {\n//   const res = await fetch(`${BASE_URL}/requests`);\n//   return res.json();\n// }","map":{"version":3,"names":["items","id","name","category","condition","quantity","availability","requests","currentUser","role","addRequest","equipmentId","equipment","equipmentList","find","e","Promise","reject","newRequest","length","itemName","requestedBy","requestedByName","qty","status","createdAt","Date","toISOString","push","resolve","getRequests","getEquipmentList","setTimeout","approveRequest","requestId","req","r","Math","max","rejectRequest","addItem","newItem","initMockData","loginUser","email","password","includes","token","getItems","deleteItem","filter","it","updateRequestStatus","map"],"sources":["C:/Users/Soundharya GP/OneDrive/Desktop/schoolequipmentui/src/api/mockAPI.js"],"sourcesContent":["// src/api/mockApi.js\r\nlet items = [\r\n    { id: 1, name: \"Microscope\", category: \"Lab\", condition: \"Good\", quantity: 5, availability: true },\r\n    { id: 2, name: \"Football\", category: \"Sports\", condition: \"Fair\", quantity: 10, availability: true },\r\n  ];\r\n  \r\n  let requests = [];\r\n  // src/api/mockAPI.js\r\n// existing mock request storage\r\nlet currentUser = { role: \"Student\", name: \"Student User\" }; // for testing\r\n\r\nexport function addRequest(equipmentId) {\r\n  const equipment = equipmentList.find((e) => e.equipmentId === equipmentId);\r\n  if (!equipment || equipment.quantity === 0) {\r\n    return Promise.reject(\"Equipment not available\");\r\n  }\r\n\r\n  const newRequest = {\r\n    id: requests.length + 1,\r\n    equipmentId: equipment.equipmentId,\r\n    itemName: equipment.name,\r\n    requestedBy: currentUser.id,\r\n    requestedByName: currentUser.name,\r\n    qty: 1,\r\n    status: \"Pending\",\r\n    createdAt: new Date().toISOString(),\r\n  };\r\n\r\n  requests.push(newRequest);\r\n\r\n  // Reduce quantity to simulate issued request\r\n//   equipment.quantity = Math.max(0, equipment.quantity - 1);\r\n\r\n  return Promise.resolve(\"Request submitted\");\r\n}\r\n\r\n// Optional: get requests for student dashboard\r\nexport function getRequests() {\r\n  return Promise.resolve(requests);\r\n}\r\n\r\n  // src/api/mockAPI.js\r\n\r\n// Mock data\r\nconst equipmentList = [\r\n    {\r\n      equipmentId: 1,\r\n      name: \"Microscope\",\r\n      category: \"Lab\",\r\n      condition: \"Good\",\r\n      quantity: 5,\r\n      availability: true,\r\n    },\r\n    {\r\n      equipmentId: 2,\r\n      name: \"Football\",\r\n      category: \"Sports\",\r\n      condition: \"Fair\",\r\n      quantity: 10,\r\n      availability: true,\r\n    },\r\n  ];\r\n  \r\n  // Simulate GET /equipment/list\r\n  export function getEquipmentList() {\r\n    // Return a promise to mimic async API call\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        resolve(equipmentList);\r\n      }); // simulate network delay\r\n    });\r\n  }\r\n  \r\n  export function approveRequest(requestId) {\r\n    const req = requests.find((r) => r.id === requestId);\r\n    if (!req) return Promise.reject(\"Request not found\");\r\n  \r\n    req.status = \"Approved\";\r\n  \r\n    // Reduce equipment quantity on approval\r\n    const equipment = equipmentList.find((e) => e.equipmentId === req.equipmentId);\r\n    if (equipment) {\r\n      equipment.quantity = Math.max(0, equipment.quantity - req.qty);\r\n    }\r\n  \r\n    return Promise.resolve(\"Request approved\");\r\n  }\r\n  \r\n  // Reject a request\r\n  export function rejectRequest(requestId) {\r\n    const req = requests.find((r) => r.id === requestId);\r\n    if (!req) return Promise.reject(\"Request not found\");\r\n  \r\n    req.status = \"Rejected\";\r\n    return Promise.resolve(\"Request rejected\");\r\n  }\r\n  \r\n  // Optional: function to add equipment (for AdminDashboard)\r\n  export function addItem(newItem) {\r\n    const id = equipmentList.length + 1;\r\n    equipmentList.push({ equipmentId: id, ...newItem });\r\n    return Promise.resolve(\"Equipment added\");\r\n  }\r\n  \r\n  \r\n  export function initMockData() {\r\n    // already initialized above\r\n  }\r\n  \r\n  export function loginUser(email, password) {\r\n    if (email.includes(\"admin\"))\r\n      return { token: \"mock-admin\", role: \"Admin\", name: \"Admin User\" };\r\n    if (email.includes(\"lab\"))\r\n      return { token: \"mock-lab\", role: \"LabAssistant\", name: \"Lab Assistant\" };\r\n    if (email.includes(\"student\"))\r\n      return { token: \"mock-student\", role: \"Student\", name: \"Student User\" };\r\n    return null;\r\n  }\r\n  \r\n//   export async function getEquipmentList() {\r\n//     const res = await fetch(`${BASE_URL}/equipment`);\r\n//     return res.json();\r\n//   }\r\n  \r\n  \r\n  // Items\r\n  export function getItems() {\r\n    return items;\r\n  }\r\n  \r\n//   export function addItem(item) {\r\n//     item.id = items.length + 1;\r\n//     items.push(item);\r\n//   }\r\n  \r\n  export function deleteItem(id) {\r\n    items = items.filter((it) => it.id !== id);\r\n  }\r\n  \r\n  // Requests\r\n//   export function getRequests() {\r\n//     return requests;\r\n//   }\r\n  \r\n//   export function addRequest(req) {\r\n//     req.id = requests.length + 1;\r\n//     requests.push(req);\r\n//   }\r\n  \r\n  export function updateRequestStatus(id, status) {\r\n    requests = requests.map((r) => (r.id === id ? { ...r, status } : r));\r\n  }\r\n  \r\n// const BASE_URL = \"https://dummyjson.com/products\"; // update later if hosted\r\n\r\n// export async function login(email, password) {\r\n//   const res = await fetch(`${BASE_URL}/auth/login`, {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ email, password }),\r\n//   });\r\n//   if (!res.ok) throw new Error(\"Login failed\");\r\n//   return res.json();\r\n// }\r\n\r\n// export async function getEquipmentList() {\r\n//   const res = await fetch(`${BASE_URL}/equipment`);\r\n//   return res.json();\r\n// }\r\n\r\n// export async function addEquipment(item) {\r\n//   const res = await fetch(`${BASE_URL}/equipment`, {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify(item),\r\n//   });\r\n//   return res.json();\r\n// }\r\n\r\n// export async function requestEquipment(id, userId) {\r\n//   const res = await fetch(`${BASE_URL}/requests`, {\r\n//     method: \"POST\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ equipmentId: id, userId }),\r\n//   });\r\n//   return res.json();\r\n// }\r\n\r\n// export async function updateRequestStatus(id, status) {\r\n//   const res = await fetch(`${BASE_URL}/requests/${id}`, {\r\n//     method: \"PUT\",\r\n//     headers: { \"Content-Type\": \"application/json\" },\r\n//     body: JSON.stringify({ status }),\r\n//   });\r\n//   return res.json();\r\n// }\r\n\r\n// export async function getAllRequests() {\r\n//   const res = await fetch(`${BASE_URL}/requests`);\r\n//   return res.json();\r\n// }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}