{"ast":null,"code":"// src/api/mockAPI.js\n\n// Simulated local database\nlet users = JSON.parse(localStorage.getItem(\"users\")) || [{\n  id: 1,\n  email: \"admin@school.com\",\n  password: \"admin123\",\n  role: \"Admin\",\n  name: \"Admin User\"\n}, {\n  id: 2,\n  email: \"lab@school.com\",\n  password: \"lab123\",\n  role: \"LabAssistant\",\n  name: \"Lab Assistant\"\n}, {\n  id: 3,\n  email: \"student@school.com\",\n  password: \"student123\",\n  role: \"Student\",\n  name: \"Student User\"\n}];\nlet equipment = JSON.parse(localStorage.getItem(\"equipment\")) || [{\n  id: 1,\n  name: \"Microscope\",\n  category: \"Lab\",\n  condition: \"Good\",\n  quantity: 5,\n  availability: true\n}, {\n  id: 2,\n  name: \"Football\",\n  category: \"Sports\",\n  condition: \"Fair\",\n  quantity: 10,\n  availability: true\n}];\nlet requests = JSON.parse(localStorage.getItem(\"requests\")) || [];\n\n// Utility functions to persist to localStorage\nconst save = () => {\n  localStorage.setItem(\"users\", JSON.stringify(users));\n  localStorage.setItem(\"equipment\", JSON.stringify(equipment));\n  localStorage.setItem(\"requests\", JSON.stringify(requests));\n};\n\n// ✅ AUTH SECTION\nexport function login(email, password) {\n  const user = users.find(u => u.email === email && u.password === password);\n  if (!user) throw new Error(\"Invalid credentials\");\n  const token = `MOCK-TOKEN-${user.role}-${user.id}`;\n  return {\n    token,\n    userId: user.id,\n    role: user.role,\n    name: user.name\n  };\n}\nexport function signup(email, password, role, name) {\n  if (users.some(u => u.email === email)) throw new Error(\"User already exists\");\n  const newUser = {\n    id: Date.now(),\n    email,\n    password,\n    role,\n    name\n  };\n  users.push(newUser);\n  save();\n  return {\n    message: \"Signup successful\"\n  };\n}\n\n// ✅ EQUIPMENT MANAGEMENT\nexport function getEquipmentList() {\n  return equipment;\n}\nexport function addEquipment(newItem) {\n  newItem.id = Date.now();\n  equipment.push(newItem);\n  save();\n  return {\n    message: \"Equipment added\"\n  };\n}\nexport function editEquipment(id, updates) {\n  equipment = equipment.map(item => item.id === id ? {\n    ...item,\n    ...updates\n  } : item);\n  save();\n  return {\n    message: \"Equipment updated\"\n  };\n}\nexport function deleteEquipment(id) {\n  equipment = equipment.filter(item => item.id !== id);\n  save();\n  return {\n    message: \"Equipment deleted\"\n  };\n}\n\n// ✅ REQUEST MANAGEMENT\nexport function requestEquipment(equipmentId, requestedById) {\n  const eq = equipment.find(e => e.id === equipmentId);\n  if (!eq) throw new Error(\"Equipment not found\");\n  const user = users.find(u => u.id === requestedById);\n  const newRequest = {\n    id: Date.now(),\n    equipmentId,\n    itemName: eq.name,\n    requestedById,\n    requestedByName: user.name,\n    status: \"Pending\",\n    createdAt: new Date().toISOString()\n  };\n  requests.push(newRequest);\n  save();\n  return {\n    message: \"Request submitted\"\n  };\n}\nexport function getAllRequests() {\n  return requests;\n}\nexport function updateRequestStatus(reqId, status, approvedByName) {\n  requests = requests.map(r => r.id === reqId ? {\n    ...r,\n    status,\n    approvedBy: approvedByName,\n    updatedAt: new Date().toISOString()\n  } : r);\n  save();\n  return {\n    message: \"Request updated\"\n  };\n}\n\n// ✅ ANALYTICS\nexport function getHistory() {\n  return requests;\n}\nexport function getSummary() {\n  return {\n    totalRequests: requests.length,\n    returnedCount: requests.filter(r => r.status === \"Returned\").length,\n    mostRequestedItem: requests.length > 0 ? requests.reduce((a, b) => requests.filter(x => x.itemName === a.itemName).length > requests.filter(x => x.itemName === b.itemName).length ? a : b).itemName : \"N/A\",\n    requestsByRole: requests.reduce((acc, r) => {\n      const user = users.find(u => u.id === r.requestedById);\n      acc[user.role] = (acc[user.role] || 0) + 1;\n      return acc;\n    }, {})\n  };\n}","map":{"version":3,"names":["users","JSON","parse","localStorage","getItem","id","email","password","role","name","equipment","category","condition","quantity","availability","requests","save","setItem","stringify","login","user","find","u","Error","token","userId","signup","some","newUser","Date","now","push","message","getEquipmentList","addEquipment","newItem","editEquipment","updates","map","item","deleteEquipment","filter","requestEquipment","equipmentId","requestedById","eq","e","newRequest","itemName","requestedByName","status","createdAt","toISOString","getAllRequests","updateRequestStatus","reqId","approvedByName","r","approvedBy","updatedAt","getHistory","getSummary","totalRequests","length","returnedCount","mostRequestedItem","reduce","a","b","x","requestsByRole","acc"],"sources":["C:/Users/Soundharya GP/OneDrive/Desktop/schoolequipmentui/src/api/mockAPI.js"],"sourcesContent":["// src/api/mockAPI.js\r\n\r\n// Simulated local database\r\nlet users = JSON.parse(localStorage.getItem(\"users\")) || [\r\n    { id: 1, email: \"admin@school.com\", password: \"admin123\", role: \"Admin\", name: \"Admin User\" },\r\n    { id: 2, email: \"lab@school.com\", password: \"lab123\", role: \"LabAssistant\", name: \"Lab Assistant\" },\r\n    { id: 3, email: \"student@school.com\", password: \"student123\", role: \"Student\", name: \"Student User\" },\r\n  ];\r\n  \r\n  let equipment = JSON.parse(localStorage.getItem(\"equipment\")) || [\r\n    { id: 1, name: \"Microscope\", category: \"Lab\", condition: \"Good\", quantity: 5, availability: true },\r\n    { id: 2, name: \"Football\", category: \"Sports\", condition: \"Fair\", quantity: 10, availability: true },\r\n  ];\r\n  \r\n  let requests = JSON.parse(localStorage.getItem(\"requests\")) || [];\r\n  \r\n  // Utility functions to persist to localStorage\r\n  const save = () => {\r\n    localStorage.setItem(\"users\", JSON.stringify(users));\r\n    localStorage.setItem(\"equipment\", JSON.stringify(equipment));\r\n    localStorage.setItem(\"requests\", JSON.stringify(requests));\r\n  };\r\n  \r\n  // ✅ AUTH SECTION\r\n  export function login(email, password) {\r\n    const user = users.find((u) => u.email === email && u.password === password);\r\n    if (!user) throw new Error(\"Invalid credentials\");\r\n    const token = `MOCK-TOKEN-${user.role}-${user.id}`;\r\n    return { token, userId: user.id, role: user.role, name: user.name };\r\n  }\r\n  \r\n  export function signup(email, password, role, name) {\r\n    if (users.some((u) => u.email === email)) throw new Error(\"User already exists\");\r\n    const newUser = { id: Date.now(), email, password, role, name };\r\n    users.push(newUser);\r\n    save();\r\n    return { message: \"Signup successful\" };\r\n  }\r\n  \r\n  // ✅ EQUIPMENT MANAGEMENT\r\n  export function getEquipmentList() {\r\n    return equipment;\r\n  }\r\n  \r\n  export function addEquipment(newItem) {\r\n    newItem.id = Date.now();\r\n    equipment.push(newItem);\r\n    save();\r\n    return { message: \"Equipment added\" };\r\n  }\r\n  \r\n  export function editEquipment(id, updates) {\r\n    equipment = equipment.map((item) => (item.id === id ? { ...item, ...updates } : item));\r\n    save();\r\n    return { message: \"Equipment updated\" };\r\n  }\r\n  \r\n  export function deleteEquipment(id) {\r\n    equipment = equipment.filter((item) => item.id !== id);\r\n    save();\r\n    return { message: \"Equipment deleted\" };\r\n  }\r\n  \r\n  // ✅ REQUEST MANAGEMENT\r\n  export function requestEquipment(equipmentId, requestedById) {\r\n    const eq = equipment.find((e) => e.id === equipmentId);\r\n    if (!eq) throw new Error(\"Equipment not found\");\r\n    const user = users.find((u) => u.id === requestedById);\r\n    const newRequest = {\r\n      id: Date.now(),\r\n      equipmentId,\r\n      itemName: eq.name,\r\n      requestedById,\r\n      requestedByName: user.name,\r\n      status: \"Pending\",\r\n      createdAt: new Date().toISOString(),\r\n    };\r\n    requests.push(newRequest);\r\n    save();\r\n    return { message: \"Request submitted\" };\r\n  }\r\n  \r\n  export function getAllRequests() {\r\n    return requests;\r\n  }\r\n  \r\n  export function updateRequestStatus(reqId, status, approvedByName) {\r\n    requests = requests.map((r) =>\r\n      r.id === reqId ? { ...r, status, approvedBy: approvedByName, updatedAt: new Date().toISOString() } : r\r\n    );\r\n    save();\r\n    return { message: \"Request updated\" };\r\n  }\r\n  \r\n  // ✅ ANALYTICS\r\n  export function getHistory() {\r\n    return requests;\r\n  }\r\n  \r\n  export function getSummary() {\r\n    return {\r\n      totalRequests: requests.length,\r\n      returnedCount: requests.filter((r) => r.status === \"Returned\").length,\r\n      mostRequestedItem:\r\n        requests.length > 0\r\n          ? requests.reduce((a, b) =>\r\n              requests.filter((x) => x.itemName === a.itemName).length >\r\n              requests.filter((x) => x.itemName === b.itemName).length\r\n                ? a\r\n                : b\r\n            ).itemName\r\n          : \"N/A\",\r\n      requestsByRole: requests.reduce((acc, r) => {\r\n        const user = users.find((u) => u.id === r.requestedById);\r\n        acc[user.role] = (acc[user.role] || 0) + 1;\r\n        return acc;\r\n      }, {}),\r\n    };\r\n  }\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}